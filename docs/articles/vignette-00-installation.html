<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="slendr">
<title>Installation instructions • slendr</title>
<!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png">
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png">
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png">
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Installation instructions">
<meta property="og:description" content="slendr">
<meta property="og:image" content="https://www.slendr.net/logo.png">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">slendr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.7.2.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-question-circle"></span>
     
    Reference
  </a>
</li>
<li class="active nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown--articles">
    <span class="fa fa-book"></span>
     
    Articles
  </a>
  <div class="dropdown-menu" aria-labelledby="dropdown--articles">
    <a class="dropdown-item" href="../articles/vignette-00-installation.html">Installation instructions</a>
    <a class="dropdown-item" href="../articles/vignette-01-tutorial.html">Introduction and basic tutorial</a>
    <a class="dropdown-item" href="../articles/vignette-02-grid-model.html">Demes on a regular spatial grid</a>
    <a class="dropdown-item" href="../articles/vignette-03-interactions.html">Programming dispersion dynamics</a>
    <a class="dropdown-item" href="../articles/vignette-04-nonspatial-models.html">Traditional non-spatial models</a>
    <a class="dropdown-item" href="../articles/vignette-05-tree-sequences.html">Tree sequence processing and statistics</a>
    <a class="dropdown-item" href="../articles/vignette-06-locations.html">Spatially annotated tree sequences</a>
    <a class="dropdown-item" href="../articles/vignette-07-backends.html">Simulating data with SLiM and msprime backends</a>
    <a class="dropdown-item" href="../articles/vignette-08-nonslendr-tskit.html">Analyzing non-slendr tree sequences</a>
    <a class="dropdown-item" href="../articles/vignette-09-paper.html">Examples from the slendr paper</a>
  </div>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav">
<li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/bodkan/slendr/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
<li class="nav-item">
  <a class="external-link nav-link" href="https://twitter.com/fleventy5">
    <span class="fa fa-twitter"></span>
     
  </a>
</li>
      </ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Installation instructions</h1>
            
      
      <small class="dont-index">Source: <a href="https://github.com/bodkan/slendr/blob/HEAD/vignettes/vignette-00-installation.Rmd" class="external-link"><code>vignettes/vignette-00-installation.Rmd</code></a></small>
      <div class="d-none name"><code>vignette-00-installation.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="quick-installation">Quick installation<a class="anchor" aria-label="anchor" href="#quick-installation"></a>
</h2>
<p><em>slendr</em> is available on the CRAN R package repository. As
such, you can install it simply by executing
<code>install.packages("slendr")</code> in your R console.</p>
<p>If you want (or need) to get its development version, you can install
it directly from GitHub by executing
<code>devtools::install_github("bodkan/slendr")</code> via the R package
<em>devtools</em> (you can gen <em>devtools</em> by running
<code>install.packages("devtools")</code>). In fact, if you decide to
try <em>slendr</em>, please make sure to update it regularly and keep an
eye on the <a href="https://www.slendr.net/news/index.html">changelog</a> on a regular
basis! This is where you can find information about latest bugfixes and
potential breaking changes.</p>
<p>Once you install <em>slendr</em>, <strong>calling
<code><a href="https://github.com/bodkan/slendr" class="external-link">library(slendr)</a></code> will check that all software dependencies
are available</strong>. If they are not, the R package will provide a
brief helpful guide on how to resolve potential issues. The rest of this
vignette talks about the necessary software dependencies in a bit more
detail.</p>
<p><strong>Please note that <em>slendr</em> is fully supported only on
macOS and Linux at the moment.</strong> That said, there is an
experimental support on Windows for running coalescent simulation via
<em>slendr</em>’s Python backend <code><a href="../reference/msprime.html">msprime()</a></code> and for
analyzing tree-sequence outputs using its <em>tskit</em> interface.</p>
</div>
<div class="section level2">
<h2 id="software-dependencies">Software dependencies<a class="anchor" aria-label="anchor" href="#software-dependencies"></a>
</h2>
<p><em>slendr</em> relies on three main software dependencies:</p>
<ol style="list-style-type: decimal">
<li><p>geospatial data analysis R package <a href="https://r-spatial.github.io/sf/" class="external-link"><em>sf</em></a> (for encoding
spatial <em>slendr</em> models and analysing spatial tree-sequence
data),</p></li>
<li><p>forward population genetic simulator <a href="https://messerlab.org/slim/" class="external-link">SLiM</a> (for forward
simulations),</p></li>
<li><p>Python modules <a href="https://tskit.dev/" class="external-link"><em>tskit</em>,
<em>msprime</em>, and <em>pyslim</em></a> (for coalescent simulations
and tree-sequence analysis), and also <em>pandas</em> used internally by
the simulation back ends.</p></li>
</ol>
<p>All three are widely used in their respective fields and, as such,
are easily obtainable on all major operating systems (see below for more
information on how to troubleshoot potential problems).</p>
<p><strong>Note that depending on your use case, not all three sets of
dependencies will be necessarily needed.</strong> If you’re not going to
be running forward spatial simulations, you don’t need SLiM or
geospatial R packages <em>sf</em>, <em>stars</em>, and
<em>rnaturalearth</em>.</p>
<p>In this vignette, I will briefly explain how to get all
<em>slendr’</em>s software dependencies installed. That said, note that
under normal circumstances (with the exception of SLiM), no manual
installation of individual dependencies is required.</p>
<div class="section level3">
<h3 id="sf-stars-rnaturalearth">
<em>sf</em>, <em>stars</em>, <em>rnaturalearth</em><a class="anchor" aria-label="anchor" href="#sf-stars-rnaturalearth"></a>
</h3>
<p>The R package <em>sf</em> is at the heart of geospatial data analysis
in R. It is available on CRAN and can be installed for all major
platforms by executing <code>install.packages("sf")</code> in your R
session. The same applies for <em>stars</em> and
<em>rnaturalearth</em>.</p>
<p>When you first load <em>slendr</em> via <code><a href="https://github.com/bodkan/slendr" class="external-link">library(slendr)</a></code>,
if you’re missing any of the three geospatial R packages, you will be
notified and instructed how you can easily obtain them from CRAN using a
single call to <code><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages()</a></code>.</p>
<p>That said, <em>sf</em> itself depends on a number of geospatial
libraries and depending on the exact setup of your Linux or macOS
machine, some of those libraries could be missing. Luckily, all of them
are very easy to install via Homebrew (on macOS) or via the appropriate
package manager of your Linux distribution (Ubuntu, Fedora, etc.).
Detailed instructions on how to do this for your operating system can be
found <a href="https://r-spatial.github.io/sf/index.html#installing" class="external-link">here</a>.</p>
<p><strong>If you’re having problems with the installation of any of
these three packages, look for help <a href="https://r-spatial.github.io/sf/index.html#installing" class="external-link">here</a>.</strong></p>
<div class="section level4">
<h4 id="macos">
<strong>macOS</strong><a class="anchor" aria-label="anchor" href="#macos"></a>
</h4>
<p>One user who recently installed <em>slendr</em> on a fresh macOS
system reported that they needed to install <code>libgit2</code> in
order to be able to install the package <em>devtools</em> for the
<code>devtools::install_github("bodkan/slendr")</code> step described on
top of this page.</p>
<p>Additionally, they had to install a couple of C/C++ libraries as well
(all dependencies of the <em>sf</em> package). In the end, they were
able to successfully install <em>slendr</em> after running:</p>
<pre><code>brew install libgit2 udunits gdal proj</code></pre>
<p>Note that this assumes that you have the <a href="https://brew.sh/" class="external-link">Homebrew</a> package manager already setup on
your Mac. If you’re a beginning computational scientist using a Mac, I
strongly encourage you to install Homebrew. Sooner or later you will
need some specific Linux/unix program anyway, and Homebrew is the way to
get it (Mac is a unix machine, but without Homebrew a very poor one by
default).</p>
</div>
<div class="section level4">
<h4 id="linux">
<strong>Linux</strong><a class="anchor" aria-label="anchor" href="#linux"></a>
</h4>
<p>Testing <em>slendr</em> installation on a fresh, pristine Debian
installation with no dependencies previously installed, I had to run the
following:</p>
<pre><code>sudo apt-get install libudunits2-dev libssl-dev libgdal-dev libgsl-dev libgit2-dev libfontconfig1-dev libharfbuzz-dev libfribidi-dev</code></pre>
<p>It’s very unlikely you would need all of the above (and you might
need other packages on non-Debian distributions), but this is what got
<em>slendr</em> and all of its dependencies running on a completely
clean system. Might be a good start in case you have trouble on your
Linux machine.</p>
</div>
</div>
<div class="section level3">
<h3 id="slim">SLiM<a class="anchor" aria-label="anchor" href="#slim"></a>
</h3>
<p>The forward population genetic software SLiM is available on all
major software platforms. Its complete installation instructions can be
found <a href="https://messerlab.org/slim/" class="external-link">here</a>. On a Mac, I
recommend installing SLiM via the <code>pkg</code> installer available
for direct download from its <a href="https://messerlab.org/slim/" class="external-link">website</a>. On Linux, you can either
install SLiM via the appropriate package manager for your Linux
distribution (see SLiM manual <a href="https://messerlab.org/slim/" class="external-link">here</a> for more information), or
you can easily compile your own.</p>
<p>Note that <em>slendr</em> requires SLiM 4.0 and will not work with an
earlier version. Again, running <code><a href="https://github.com/bodkan/slendr" class="external-link">library(slendr)</a></code> will inform
you of any potential issues with your SLiM installation.</p>
</div>
<div class="section level3">
<h3 id="python">Python<a class="anchor" aria-label="anchor" href="#python"></a>
</h3>
<p>In order to be able to run coalescent simulations and process
tree-sequence files, <em>slendr</em> needs Python modules
<em>tskit</em>, <em>msprime</em>, and <em>pyslim</em> (it also needs the
<em>pandas</em> library).</p>
<p>Setting up an isolated Python environment with specific version of
Python packages (which is very important to avoid clashes among
different Python programs needed by your system) can be a <a href="https://xkcd.com/1987/" class="external-link">bit of a hassle</a> for some users. This
is especially true for R users who might not use Python in their daily
work, such as yours truly.</p>
<p>In order to make sure that the R package has the most appropriate
version of Python available, with the correct versions of all of its
Python module dependencies, <em>slendr</em> provides a dedicated
function <code><a href="../reference/setup_env.html">setup_env()</a></code> which automatically <strong>downloads
a completely separate Python distribution and installs the required
versions of <em>tskit</em>, <em>msprime</em>, and <em>pyslim</em>
modules into a dedicated virtual environment</strong>. Moreover, this
Python installation and virtual environment are <strong>entirely
isolated from other Python configurations that are already present on
the user’s system</strong>, avoiding potential conflicts with the
versions of Python and Python modules required by <em>slendr</em>.</p>
<p><strong>Next time you call <code><a href="https://github.com/bodkan/slendr" class="external-link">library(slendr)</a></code>, you will
need to activate this environment automatically by calling
<code><a href="../reference/init_env.html">init_env()</a></code></strong>. If you’re not comfortable with Python
you don’t need to worry beyond calling <code><a href="../reference/setup_env.html">setup_env()</a></code> and
<code><a href="../reference/init_env.html">init_env()</a></code>, no interaction with Python is necessary for
working with <em>slendr</em> in R.</p>
<div class="section level4">
<h4 id="failing-conda">Failing <em>conda</em>?<a class="anchor" aria-label="anchor" href="#failing-conda"></a>
</h4>
<p>In order to support Windows, <em>slendr</em> uses conda to download a
Python interpreter as explained above. Given this fact, when you run
<code><a href="../reference/setup_env.html">setup_env()</a></code>, <em>slendr</em> tries to leverage conda being
present to install its Python dependencies (<em>msprime</em>,
<em>tskit</em>, <em>pyslim</em>, <em>pandas</em>) via conda itself.</p>
<p>Unfortunately, conda can break for frustratingly many random reasons
which completely trips up <code><a href="../reference/setup_env.html">setup_env()</a></code>. If you run into this
issue, <strong>there is a fallback option to install Python dependencies
<em>msprime</em>, <em>tskit</em>, <em>pyslim</em>, and <em>pandas</em>
via <code>pip</code></strong> which, unlike conda, works practically
every time. You can do this <strong>by calling
<code>setup_env(pip = TRUE)</code></strong> instead of the default
<code><a href="../reference/setup_env.html">setup_env()</a></code>. Note that <strong>this might require you to
install the <a href="https://www.gnu.org/software/gsl/" class="external-link">GSL</a>
numerical library, but that’s a trivial issue on macOS
(<code>brew install gsl</code>) and Linux (on Ubuntu, for instance,
<code>sudo apt-get install libgsl-dev</code>)</strong>.</p>
</div>
<div class="section level4">
<h4 id="information-for-python-experts">Information for Python experts<a class="anchor" aria-label="anchor" href="#information-for-python-experts"></a>
</h4>
<p>In case you are wondering how does <em>slendr</em> accomplish the
above: <em>slendr</em>’s Python interface is implemented using the R
package <a href="https://rstudio.github.io/reticulate/" class="external-link"><em>reticulate</em></a><em>.</em>
This embeds a Python session within an R session, enabling
high-performance interoperability between both languages without any
need for user intervention.</p>
</div>
</div>
</div>
<div class="section level2">
<h2 id="docker">Docker<a class="anchor" aria-label="anchor" href="#docker"></a>
</h2>
<p>There is currently no official Docker image for <em>slendr</em> but
there will be once the R package finally lands on the official CRAN
repository. The current plan is to use the geospatial image published by
the <a href="https://rocker-project.org/" class="external-link">Rocker project</a> (which
already contains pre-compiled R, RStudio, and all necessary R package
dependencies such as <em>sf</em> ) and extend it with <em>slendr</em>
and SLiM.</p>
<p>Stay tuned!</p>
</div>
<div class="section level2">
<h2 id="renv">renv<a class="anchor" aria-label="anchor" href="#renv"></a>
</h2>
<p>TODO: Advertise the <a href="https://rstudio.github.io/renv/articles/renv.html" class="external-link">renv</a>
solution for managing reproducible environments for R packages.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Martin Petr.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
